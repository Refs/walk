!function(e){"use strict";function t(){var e;return e={__exceptions:{},__data:{reports:[]},__util:{},__classes:{},__builders:{},__matchedCallbacks:function(t,a){var n=e.__runtime.config.runCallbacks,r=[];if(n){var s=e.__runtime.positionCallbacks[a];if("undefined"==typeof s)return[];for(var i=0;i<s.length;++i){var o=s[i];if(!("undefined"!=typeof o.containers&&-1===o.containers.indexOf(t.container)||"undefined"!=typeof o.classNames&&-1===o.classNames.indexOf(t.className))){var l="undefined"!=typeof o.keys,c="undefined"!=typeof o.classKeys;if(l||c){if("undefined"==typeof t.key)continue;if(c){var _=t.parent();if("undefined"===_)return;if("undefined"==typeof _.className||"undefined"==typeof o.classKeys[_.className]||-1===o.classKeys[_.className].indexOf(t.key))continue}else if(-1===o.keys.indexOf(t.key))continue}r.push(o)}}}return r},__execCallbacks:function(t,a){for(var n=0;n<t.length;++n)t[n].__walk$_has_run=!1;for(var r=0;r<t.length;++r){if(e.__runtime.config.monitorPerformance){var s=new Date;t[r].callback(a),e.__data.reports[e.__runtime.reportId].callbackProcessingTime+=new Date-s}else t[r].callback(a);t[r].__walk$_has_run=!0,a.executedCallbacks.push(t[r])}for(var i=0;i<t.length;++i)delete t[i].__walk$_has_run},__process:function(t,a,n){var r=t.key,s=t.val,i=t.className,o=t.path||"",l=t.parent,c=e.__builders.nodeBuilder(r,s,i,o);"undefined"!=typeof l&&c.addParent(l);var _=e.__matchedCallbacks(c,"preWalk");e.__execCallbacks(_,c);var d;if("array"===c.container)for(var u=0;u<c.val.length;++u)d={key:void 0,val:c.val[u],className:c.className,path:c.path+e.__runtime.config.pathFormat(u,!0),parent:c},"breadth"===a?n.push(d):"depth"===a&&e.__process(d,"depth");else if("object"===c.container)for(var p in c.val)c.val.hasOwnProperty(p)&&(d={key:p,val:c.val[p],className:void 0,path:c.path+e.__runtime.config.pathFormat(p,!1),parent:c},"breadth"===a?n.push(d):"depth"===a&&e.__process(d,"depth"));var f=e.__matchedCallbacks(c,"postWalk");e.__execCallbacks(f,c)},__breadthTraverse:function(t){var a,n=[];for(e.__process(t,"breadth",n);n.length>0;)a=n.shift(),e.__process(a,"breadth",n)},__depthTraverse:function(t){e.__process(t,"depth")},__validateConfig:function(t){for(var a in t){var n=!1;for(var r in e.configDefaults)if(a===r){n=!0;break}n||e.__exceptions.validationError("'"+a+"' is not a valid configuration entry.")}},__initializeWalk:function(t){e.__runtime={},e.__runtime.config={},e.__runtime.nodes={},e.__runtime.seenObjects=[],e.__runtime.nodeObjectMap=new WeakMap,Object.assign(e.__runtime.config,e.configDefaults),Object.assign(e.__runtime.config,t),e.__validateConfig(e.__runtime.config),"depth"!==e.__runtime.config.traversalMode&&"breadth"!==e.__runtime.config.traversalMode&&e.__exceptions.notImplemented("Traversal modes other than 'depth' and 'breadth' are"),e.__runtime.positionCallbacks={};for(var a=0;a<e.__runtime.config.callbacks.length;++a){"undefined"==typeof e.__runtime.config.callbacks[a].priority&&(e.__runtime.config.callbacks[a].priority=0),("undefined"==typeof e.__runtime.config.callbacks[a].positions||e.__runtime.config.callbacks[a].positions.length<1)&&(e.__runtime.config.callbacks[a].positions=[e.defaultCallbackPosition]);for(var n=0;n<e.__runtime.config.callbacks[a].positions.length;++n){var r=e.__runtime.config.callbacks[a].positions[n];"undefined"==typeof e.__runtime.positionCallbacks[r]&&(e.__runtime.positionCallbacks[r]=[]),e.__runtime.positionCallbacks[r].push(e.__runtime.config.callbacks[a])}}for(var s in e.__runtime.positionCallbacks)e.__runtime.positionCallbacks[s]=e.__runtime.positionCallbacks[s].sort(e.__util.sortByPriority)},__initializeReport:function(){var t=e.__data.reports.length;return e.__data.reports.push({}),e.__data.reports[t].id=t,e.__data.reports[t].startTime=new Date,e.__data.reports[t].callbackProcessingTime=0,e.__data.reports[t].processed={},e.__data.reports[t].processed.array=0,e.__data.reports[t].processed.object=0,e.__data.reports[t].processed.value=0,e.__data.reports[t].processed.classInstances={},t},__deconstructReport:function(t){e.__data.reports[t]&&(e.__data.reports[t].endTime=new Date,e.__data.reports[t].executionTime=e.__data.reports[t].endTime-e.__data.reports[t].startTime)},__deconstructWalk:function(){e.__runtime.config.monitorPerformance&&e.__data.reports[e.__runtime.reportId]&&(e.__deconstructReport(e.__runtime.reportId),e.__runtime.config.logger.log("Finished execution. Performance report below."),e.__runtime.config.logger.log(e.__data.reports[e.__runtime.reportId])),delete e.__runtime},__checkStructure:function(t){var a=e.__runtime.config.dataStructure,n=e.__runtime.nodeObjectMap.get(t);if("undefined"!=typeof n)if("finiteTree"===a)e.__exceptions.structureFault();else if("graph"===a)return n;return!1},walk:function(t,a,n){if(e.__initializeWalk(n),e.__runtime.config.monitorPerformance){var r=e.__initializeReport();e.__runtime.reportId=r}var s={key:void 0,val:t,className:a,path:void 0};return"depth"===e.__runtime.config.traversalMode?e.__depthTraverse(s):"breadth"===e.__runtime.config.traversalMode&&e.__breadthTraverse(s),e.__deconstructWalk(),e.__runtime}}}"undefined"==typeof Walk?e.Walk=t():console.log("Error defining 'Walk': already defined.")}(this),Walk.__data.idCounter=0,Walk.__data.edgeIdCounter=0,Walk.__exceptions.classNotFound=function(e){throw"No associated class found for key: '"+e+"'."},Walk.__exceptions.traversalFault=function(e){throw"This function is not available when running in "+e+" mode! See the documentation for details."},Walk.__exceptions.notImplemented=function(e){throw e+" not implemented yet but will be soon!"},Walk.__exceptions.structureFault=function(){throw"The object violates the defined structure. Override 'dataStructure' in the config to allow parsing different object structures."},Walk.__exceptions.stopProcess=function(){throw"walk:stopProcess"},Walk.__exceptions.validationError=function(e){throw e},Walk.defaultCallbackPosition="postWalk",Walk.configDefaults={classMap:{},logger:console,traversalMode:"depth",strictClasses:!1,rootObjectCallbacks:!0,runCallbacks:!0,monitorPerformance:!1,dataStructure:"finiteTree",pathFormat:function(e,t){return t?"["+e+"]":'["'+e+'"]'},callbacks:[]},Walk.__util.sortByPriority=function(e,t){var a=e.priority,n=t.priority;return n>a?1:a>n?-1:0},Walk.__util.log=function(e,t){Walk.__runtime.config.log===!0&&("undefined"==typeof t&&(t=1),1===t?Walk.__runtime.config.logger.log.apply(console,e):2===t?"undefined"!=typeof console.group&&Walk.__runtime.config.logger.group.apply(console,e):3===t&&"undefined"!=typeof console.groupEnd&&Walk.__runtime.config.logger.groupEnd.apply(console,e))},Walk["break"]=function(){Walk.__exceptions.stopProcess()},Walk.apply=function(e,t){Walk.walk(e,void 0,{callbacks:[{callback:t}]})},Walk.find=function(e,t,a){"undefined"==typeof a&&(a=!1);var n=function(e,t){return e==t},r=function(e,t){return e===t},s=a?n:r,i=[];return Walk.apply(e,function(e){s(e.val,t)&&i.push(e.val)}),i},Walk.convert=function(e,t,a){var n;return Walk.walk(e,t,{rootObjectCallbacks:!0,callbacks:[{positions:["postWalk"],callback:function(t){var a=t.parent();if(a)if(t.key)a.val[t.key]=t;else for(var r=0;r<a.val.length;r++)a.val[r]===t.val&&(a.val[r]=t);else n=t,e=n}}]}),n},Walk.nodeMap=function(e,t){var a={};return Walk.walk(e,t,{rootObjectCallbacks:!0,callbacks:[{positions:["postWalk"],callback:function(e){a[e.id]=e}}]}),a},Walk.flatten=function(e,t,a){var n=[];return Walk.walk(e,void 0,{callbacks:[{keys:[t],callback:function(e){n.push(e.val)}}]}),a?Walk.unique(n):n},Walk.updateObjectViaPathString=function(e,t,a,n){for(var r=a.split(n).slice(1);r.length>1;)e=e[r.shift()];e[r.shift()]=t},Walk.unique=function(e){var t={};return e.filter(function(e){return t[e]?void 0:(t[e]=!0,e)})},Walk.deepCopy=function(e){var t={},a="7f:&*_a6a";return Walk.walk(e,void 0,{pathFormat:function(e,t){return a+e},rootObjectCallbacks:!1,callbacks:[{positions:["preWalk"],callback:function(e){switch(e.container){case"array":Walk.updateObjectViaPathString(t,[],e.path,a);break;case"object":Walk.updateObjectViaPathString(t,{},e.path,a);break;case"value":Walk.updateObjectViaPathString(t,e.val,e.path,a)}}}]}),t},Walk.__classes.edge=function(e,t,a){this.head=t,this.tail=e,this.directed=a,this.id=Walk.__data.edgeIdCounter++,this.isDirected?(this.head.edges.asHead.push(this),this.tail.edges.asTail.push(this)):(this.head.edges.undirected.push(this),this.tail.edges.undirected.push(this))},Walk.__classes.node=function(e,t,a,n,r,s,i){this.edges={asTail:[],asHead:[],undirected:[]},this.id=e,this.key=t,this.val=a,this.type=n,this.className=r,this.path=s,this.container=i,this.executedCallbacks=[],this.encountered=1},Walk.__classes.node.prototype.isRoot=function(){return 0===this.edges.asTail.length},Walk.__classes.node.prototype.filterEdges=function(e,t){var a;if("children"===e?a=this.edges.asTail:"parents"===e?a=this.edges.asHead:"neighbors"===e&&(a=this.edges.undirected),"undefined"!=typeof t){for(var n=[],r=0;r<a.length;++r){var s=!0;for(var i in t)if(a[r][i]!==t[i]){s=!1;break}s&&n.push(a[r])}return n}return a},Walk.__classes.node.prototype.parents=function(e){return this.filterEdges("parents",e)},Walk.__classes.node.prototype.parent=function(){return 1===this.edges.asHead.length?this.edges.asHead[0].tail:void 0},Walk.__classes.node.prototype.children=function(e){return this.filterEdges("children",e)},Walk.__classes.node.prototype.neighbors=function(e){return this.filterEdges("neighbors",e)},Walk.__classes.node.prototype.ancestors=function(){for(var e=[],t=this.parents();t;){var a=t.pop();e.push(a);var n=a.parents();n.length>0&&(t=t.concat(n))}return e},Walk.__classes.node.prototype.roots=function(){for(var e=[],t=[],a=this.parents().concat(this.neighbors());a;){edge=a.pop(),e.push(edge),edge.isRoot()&&t.push(edge),edgeEdges=edge.parents().concat(edge.neighbors());for(var n=0;n<edgeEdges.length;n++)-1===e.indexOf(edgeEdges[n])&&a.push(edgeEdges[n])}return t},Walk.__classes.node.prototype.siblings=function(){for(var e=this.parents(),t=[],a=0;a<e.length;++a)for(var n=e[a].children(),r=0;r<n.length;++r)n[r]!==this&&t.push(n[r]);return t},Walk.__classes.node.prototype.createEdge=function(e,t){var a;return-1===t?(a=new Walk.__classes.edge(e,this,!0),this.edges.asHead.push(a)):1===t?(a=new Walk.__classes.edge(this,e,!0),this.edges.asTail.push(a)):(a=new Walk.__classes.edge(this,e,!1),this.edges.undirected.push(a)),a},Walk.__classes.node.prototype.addParent=function(e){this.createEdge(e,-1)},Walk.__classes.node.prototype.addChild=function(e){this.createEdge(e,1)},Walk.__classes.node.prototype.addNeighbor=function(e){this.createEdge(e,0)},Walk.__builders.nodeBuilder=function(e,t,a,n){var r,s=typeof t,i=!("undefined"==typeof t||null===t);if(r=i&&t.constructor==Array?"array":i&&t.constructor==Object?"object":"value","object"===r||"array"===r){var o=Walk.__checkStructure(t);if(o)return o.encountered++,o}if("undefined"==typeof a){var l=Walk.__runtime.config.classMap,c=!l||!Walk.__runtime.config.classMap[e];Walk.__runtime.config.strictClasses&&c&&"object"==r?Walk.__exceptions.classNotFound(e):c||(a=Walk.__runtime.config.classMap[e])}Walk.__runtime.config.monitorPerformance&&(Walk.__data.reports[Walk.__runtime.reportId].processed[r]+=1,"undefined"!=typeof a&&"array"!=r&&("undefined"==typeof Walk.__data.reports[Walk.__runtime.reportId].processed.classInstances[a]?Walk.__data.reports[Walk.__runtime.reportId].processed.classInstances[a]=1:Walk.__data.reports[Walk.__runtime.reportId].processed.classInstances[a]+=1));var _=++Walk.__data.idCounter,d=new Walk.__classes.node(_,e,t,s,a,n,r);return("array"===r||"object"===r)&&Walk.__runtime.nodeObjectMap.set(t,d),d};